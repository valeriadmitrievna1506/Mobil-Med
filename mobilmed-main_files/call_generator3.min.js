!function(e,t){for(var i in t)e[i]=t[i]}(this,function(e){function t(r){if(i[r])return i[r].exports;var a=i[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t){Comagic.UI.registerViewController("call_generator",function(e,t){function i(e){a.refs.date[e?"removeAttribute":"setAttribute"]("c-disabled",""),a.refs.delayedCallTime[e?"removeAttribute":"setAttribute"]("c-disabled","")}function r(e){a.refs.delayedCallTimeCustomSelect.classList[e?"add":"remove"]("comagic-js-select-disabled")}var a=Comagic.UI.createWidget("call_generator",{settings:e,id:e.id,template:t.call_generator,_getBodies:function(){return[].slice.apply(this.getEl().querySelectorAll(".comagic-call-generator__body"))},_switchMode:function(t,i,r,a){var n=this._getBodies(),o=n[1].querySelector(".comagic-call-generator__body-reverse__countdown"),s=o&&t&&!a&&this.settings.is_countdown_enabled,l=null,c=t?1:2,d=function(){n[0].removeEventListener("transitionend",d),n[0].classList.add("comagic-call-generator-hidden"),n[c].classList.remove("comagic-call-generator__body--transparent")};e.is_image&&"top_center"===e.image_place&&"rectangle"===e.image_shape&&(this.getEl(".comagic-call-generator__close-btn").style.color="#"+Comagic.UI.getContrastColor(e.background_color)),n[0].addEventListener("transitionend",d),n[0].classList.add("comagic-call-generator__body--transparent"),n[1].classList.add("comagic-call-generator__body--with-"+(s?"countdown":"message")),n[c].classList.remove("comagic-call-generator-hidden"),i&&r&&(n[c].querySelector(".comagic-call-generator__body-reverse__title")&&(n[c].querySelector(".comagic-call-generator__body-reverse__title").innerHTML=i),n[c].querySelector(".comagic-call-generator__body-reverse__message")&&(n[c].querySelector(".comagic-call-generator__body-reverse__message").innerHTML=r)),s&&(o.innerHTML=this.settings.countdown,l=setInterval(function(){o.innerHTML=parseInt(o.innerHTML)-1,"0"===o.innerHTML&&clearInterval(l)},1e3))},render:function(){var e=this;this.constructor.prototype.render.apply(this,arguments),this.getEl(".comagic-call-generator__close-btn").addEventListener("click",function(){e.isSubmitted()||e.cancel(),e.destroy()}),this.getEl(".comagic-call-generator__main-btn").addEventListener("click",function(){if(!a.getErrors()){var e=a.getValues();e.group_id&&!isNaN(e.group_id)&&(e.group_id=+e.group_id),a.submit(e)}}),this._initFont()},_initFont:function(){this.settings.font_url&&this.loadFont(this.settings.font_url),this.settings.body_font_url&&this.loadFont(this.settings.body_font_url,"_body")}});a.render(),e.delayed_call_times&&(i(!a.getEl(".comagic-js-date-fields--is-active")),r(!0),a.refs.dateChangeTrigger.addEventListener("click",function(){i(!0),a.refs.dateFields.classList.add("comagic-js-date-fields--is-call-without-delay")}),a.refs.dateNowTrigger.addEventListener("click",function(){i(!1),r(!0),a.refs.delayedCallTime.value=null,a.refs.delayedCallTimeCustomSelect.innerHTML="",a.refs.date.value=null,a.refs.dateCustomSelect.innerHTML="",a.refs.dateFields.classList.remove("comagic-js-date-fields--is-call-without-delay")}),a.refs.date.addEventListener("change",function(){var i=a.refs.date.options[a.refs.date.selectedIndex],n=e.delayed_call_times[i.value];a.refs.delayedCallTime.innerHTML=Comagic.UI.createEl(t.time_options,n).innerHTML,a.refs.delayedCallTime.value=null,r(!1)})),a.on("leadhide",function(){a.destroy()}),a.on("leadsubmit",function(e){a._switchMode(e.success,e.info.title,e.info.message,e.info.isDelayed)})})}]));